Ονοματεπώνυμο:ΧΡΟΝΕΑΣ ΑΝΔΡΕΑΣ
Α.Μ. : 1115202100217


Εργασια 1


Έχουν δημιουργηθεί δύο διαφορετικά προγράμματα alpha.c,beta.c τα οποία μπρούν να τρεχουν ταυτόχρονα σε διαφορετικά terminal και να επικοινωνούν.

to run: Ανοίξτε δύο διαφορετικά terminal και τρέξτε make a στο ενα και make b στο άλλο .Για τον τερματισμό των διεργασιών πρέπει και στα δύο terminal να πληκτρολογηθεί ο κωδικός εξόδου. 

alpha:


Αρχικοποιήται ενα struct με δύο πίνακες που λειτουργούν σαν buffer για τη μεταφορά μηνυμάτων και εναν σεμαφόρο.Στη main ορίζεται η διαμοιραζόμενη μνήμη η οποία ειναι ενας δείκτης στο παραπάνω struct οπως και ο σεμαφόρος.Στη συνέχεια δημιουργούνται δύο threads :

terminalWrite : Ευθύνεται για τη την καταχώρηση του χρήστη και τη μεταφορά του μηνύματος σε chunks των 15 χαρακήτων.Αυτό επιτυγχάνεται επαναληπτικά διαβάζοντας το input και σπάζοντάς το  σε chunks μεγέθους μέχρι 15 χαρακτήρες.Κάθε φορά που διαβάζει ενα μήνυμα μεγαλύτερο απο 15 χαρακτήρες αντιγράφει στο chunk τους πρώτους 15 και εκείνο τους μεταφέρει στο αντιστοιχο buffer του struct που κοινοποιήται.Τέλος κοιμάται για 1 δευτερόλεπτο έτσι ώστε το μέρος που μεταφέρθηκε να διαβαστεί από το terminalRead του beta.Αυτό γίνεται επαναληπτικά μέχρι το μήνυμα να μεταφερθεί ολόκληρο.Τέλος αν το μήνυμα είναι #BYE# τερματίζει την αρχική επανάληψη και επιστρέφει NULL.  

terminalRead:Ευθύνεται για την παραλαβή ολόκληρου του μηνύματος και την εκτύπωση του.Αυτό επιτυγχάνεται επαναληπτικά μεταφέροντας κάθε φορά σε ένα καινούριο πίνακα το chunk που έχει γραφτεί στον αντίστοιχο κοινοποιημένο buffer του struct
(αφού μεταφερθεί ο buffer καθαρίζεται)
μέχρι αυτό να είναι μικρότερο από 15 χαρακτήρες,δηλαδή μέχρι το chunk να είναι τελευταίο.Αν το μήνυμα είναι τελευταίο το εμφανίζει εκτός αν αυτό είναι ο κωδικός εξόδου που τερματίζεται το νήμα και επιστρέφει NULL. 

Τέλος μετά την ολοκλήρωση των νημάτων διαγράφεται η κοινή μνήμη και το πρόγραμμα τερματίζει.


beta:


Αρχικοποιήται επίσης το κοινοποιημένο struct και ενημερώνεται για την κοινή μνήμη.Στη συνέχει δημιουργόυνται τα νήματα terminalRead και terminalWrite τα οποία λειτουργόυν με την ίδια λογική με τα από πάνω πραγματοποιόντας τις αντίστοιχες λειτοργίες. 